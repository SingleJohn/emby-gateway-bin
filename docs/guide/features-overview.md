# 功能总览

本文档旨在介绍 emby-gateway 的功能、适用场景及配置指南。

## 1. 核心能力

| 功能 | 作用 | 常见场景 |
|---|---|---|
| 多后端分流 | 把播放请求分发到不同存储后端 | 同时使用 S3、CDN、本地盘、123盘 |
| 路由规则 | 基于路径前缀的智能路由，实现请求的精细化分发 | 电影/剧集走不同存储 |
| 资源池 | 管理后端存储的主备关系，实现故障自动切换 | 降低播放失败率 |
| 路径映射 | 解决 Emby 路径与后端存储路径不一致的问题 | Emby 路径与实际存储路径不同时 |
| 本地文件直链 | 本地目录通过签名直链访问 | 家庭 NAS、本地盘 |
| GDrive 直链 | 支持 Google Drive 回源 | 海外存储场景 |
| 123网盘直链 | 支持 123 网盘回源 | 国内存储场景 |
| STRM 文件生成 | 自动生成本地 .strm 文件，映射后端存储媒体 | 统一管理多后端媒体文件 |
| 请求日志与统计 | 看访问、状态码、失败趋势 | 日常运维与排障 |
| 安全拦截日志 | 独立查看 deny/rate_limit 事件，支持时间筛选与详情弹窗 | 安全运营、误杀排查、攻击追踪 |
| 安全告警 | 监控异常访问行为，及时发现安全威胁 | 账号共享检测、异常访问频率 |
| 通知系统 | 通过多渠道发送告警通知与测试通知 | 企业微信、钉钉、Telegram、Bark、Server酱 |
| 安全规则 | 基于 IP、路径、用户代理的访问控制 | 阻止爬虫、限制访问频率 |
| 许可证管理 | 激活和管理软件许可证 | 功能授权、状态监控 |


## 2. 典型使用场景

### 场景 A：单后端（最简单）

- 1 个 Source + 1 个后端 + 1 条默认路由
- 适合刚开始使用，先跑通链路

### 场景 B：主备高可用

- 1 个资源池里配置“主后端 + 备后端”
- 主后端异常时自动切到备后端

### 场景 C：按路径分流

- 电影路径走后端 A，剧集路径走后端 B
- 常用于冷热数据分层、成本优化

### 场景 D：文件直链

- 文件通过签名直链访问
- 用户可以直接访问文件，无需 Emby 服务器中转

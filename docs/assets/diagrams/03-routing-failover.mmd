flowchart TD
    A[收到播放请求] --> B{命中路由规则?}
    B -- 否 --> F1[回退上游代理<br/>或提示未匹配]
    B -- 是 --> C{路径映射成功?}
    C -- 否 --> F2[映射失败]
    C -- 是 --> D[尝试主后端]
    D --> E{主后端可用?}
    E -- 是 --> G[返回 302 直链]
    E -- 否 --> H[切换备后端]
    H --> I{备后端可用?}
    I -- 是 --> G
    I -- 否 --> F3[返回失败/提示无可用后端]

